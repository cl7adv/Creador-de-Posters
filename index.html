<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Log Station v5.3.5 - Alfred CL7ADV</title>
    <style>
        :root {
            --bg-dark: #050a14;
            --panel-bg: #0d1b2a;
            --neon-cyan: #00e5ff;
            --neon-pink: #ff007f;
            --neon-yellow: #ffea00;
            --neon-green: #00ff88;
            --text-main: #e6f1ff;
            --card-bg: rgba(20, 33, 61, 0.9);
            --sunrise: linear-gradient(0deg, #ff7e5f 0%, #feb47b 50%, #050a14 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body, html {
            height: 100%;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow-x: hidden;
            position: relative;
        }

        /* MARCA DE AGUA DEL CREADOR */
        .watermark {
            position: fixed;
            bottom: 15px;
            right: 15px;
            font-size: 0.75rem;
            color: rgba(0, 229, 255, 0.5);
            z-index: 3000;
            pointer-events: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(0, 229, 255, 0.4);
            font-family: 'Courier New', Courier, monospace;
        }

        /* PANTALLA DE INTRODUCCI√ìN */
        #intro-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--sunrise);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 1.5s ease, visibility 1.5s;
        }

        .sun {
            width: 100px; height: 100px;
            background: #fffbe6;
            border-radius: 50%;
            box-shadow: 0 0 50px #ffea00, 0 0 100px #ff7e5f;
            margin-bottom: 20px;
            animation: pulse 3s infinite alternate;
        }

        @keyframes pulse { from { transform: scale(1); opacity: 0.8; } to { transform: scale(1.1); opacity: 1; } }

        .intro-text {
            font-size: 1.5rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 5px;
            color: white;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
            text-align: center;
        }

        /* CONTENIDO PRINCIPAL */
        #main-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transition: opacity 2s ease;
        }

        header {
            background: rgba(13, 27, 42, 0.95);
            padding: 10px 15px;
            text-align: center;
            border-bottom: 2px solid var(--neon-cyan);
            box-shadow: 0 0 15px var(--neon-cyan);
            position: sticky; top: 0; z-index: 100;
        }

        .time-display {
            font-family: 'Courier New', Courier, monospace;
            color: var(--neon-green);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .container { padding: 20px; max-width: 1200px; margin: 0 auto; width: 100%; flex-grow: 1; }

        /* MENU CASILLAS */
        .grid-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 25px;
        }

        .menu-item {
            background: var(--panel-bg);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 100px; opacity: 0.7;
        }

        .menu-item:hover { transform: scale(1.02); opacity: 1; border-color: var(--neon-cyan); }
        
        .menu-item.active-item {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px var(--neon-cyan), inset 0 0 10px rgba(0, 229, 255, 0.2);
            background: #1b263b; opacity: 1; transform: translateY(-2px);
        }

        .menu-item .number { position: absolute; top: 5px; left: 8px; font-size: 0.75rem; color: var(--neon-pink); font-weight: bold; }
        .menu-item i { font-size: 1.6rem; margin-bottom: 6px; color: var(--neon-yellow); }

        /* PANELES */
        .log-entry-panel {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            border-top: 3px solid var(--neon-pink);
            margin-bottom: 20px;
            display: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .active-panel { display: block; animation: slideUp 0.4s ease; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 15px; }
        .form-group { display: flex; flex-direction: column; margin-bottom: 10px; }
        
        label { font-size: 0.7rem; color: var(--neon-cyan); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }

        input, select {
            background: rgba(27, 38, 59, 0.8);
            border: 1px solid #444;
            color: white;
            padding: 12px;
            border-radius: 8px;
            outline: none;
            transition: 0.3s;
        }

        input:focus { border-color: var(--neon-green); box-shadow: 0 0 10px rgba(0,255,136,0.3); }

        .btn {
            padding: 14px 20px; border: none; border-radius: 8px; cursor: pointer;
            font-weight: bold; text-transform: uppercase; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        .btn-pink { background: var(--neon-pink); color: #fff; }
        .btn-green { background: var(--neon-green); color: #000; }
        .btn-cyan { background: var(--neon-cyan); color: #000; }

        /* ESTILO PARA EL BUSCADOR QRZ */
        .qrz-input-wrapper {
            display: flex;
            gap: 5px;
        }
        .qrz-input-wrapper input { flex-grow: 1; }
        .btn-qrz {
            background: #ffea00;
            color: #000;
            padding: 0 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 0 10px rgba(255, 234, 0, 0.4);
        }
        .btn-qrz:hover { background: #fff; box-shadow: 0 0 20px #ffea00; }

        .table-container { width: 100%; overflow-x: auto; background: rgba(0,0,0,0.3); border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; min-width: 700px; font-size: 0.85rem; }
        th { background: var(--panel-bg); color: var(--neon-yellow); text-align: left; padding: 12px; border-bottom: 2px solid var(--neon-cyan); }
        td { padding: 10px; border-bottom: 1px solid #222; }
        tr:hover { background: rgba(0,229,255,0.05); }

        .action-btn { background: none; border: none; cursor: pointer; font-size: 1.1rem; padding: 5px; transition: 0.2s; }
        .action-btn:hover { transform: scale(1.3); }

        @media (max-width: 600px) {
            .grid-menu { grid-template-columns: repeat(2, 1fr); }
            .form-row { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

<!-- FIRMA DE AGUA -->
<div class="watermark">CL7ADV-CUBA Creador</div>

<!-- PANTALLA INTRO -->
<div id="intro-screen">
    <div class="sun"></div>
    <div class="intro-text">
        Amanecer en el Caribe<br>
        <span style="font-size: 0.8rem; letter-spacing: 2px; color: var(--neon-cyan);">Cargando Estaci√≥n de Alfred CL7ADV...</span>
    </div>
</div>

<div id="main-content">
    <header>
        <h1 style="font-size: 1.3rem;">NEON LOG STATION v5.3.5</h1>
        <p style="font-size: 0.8rem;">Op: <span id="header-op" style="color:var(--neon-yellow)">---</span> | <span id="header-count">0</span> QSOs registrados</p>
        <div id="clock" class="time-display">00:00:00 UTC</div>
    </header>

    <div class="container">
        <!-- CASILLAS MENU -->
        <div class="grid-menu">
            <div id="btn-op" class="menu-item" onclick="togglePanel('panel-op', 'btn-op')">
                <span class="number">00</span><i>üë§</i><span>Operador</span>
            </div>
            <div id="btn-log" class="menu-item active-item" onclick="togglePanel('panel-log', 'btn-log')">
                <span class="number">01</span><i>üìù</i><span>Nuevo QSO</span>
            </div>
            <div id="btn-table" class="menu-item" onclick="togglePanel('panel-table', 'btn-table')">
                <span class="number">02</span><i>üìã</i><span>Libro</span>
            </div>
            <div id="btn-export" class="menu-item" onclick="exportADIF()">
                <span class="number">03</span><i>üíæ</i><span>Exportar</span>
            </div>
            <div id="btn-clear" class="menu-item" onclick="clearLogs()">
                <span class="number">04</span><i>üóëÔ∏è</i><span>Limpiar</span>
            </div>
        </div>

        <!-- PANEL OPERADOR -->
        <div id="panel-op" class="log-entry-panel">
            <h3 style="color: var(--neon-yellow); margin-bottom: 15px;">Ajustes de Estaci√≥n (M√≠a)</h3>
            <div class="form-row">
                <div class="form-group"><label>Tu Indicativo</label><input type="text" id="op_call" placeholder="CL7ADV" oninput="saveOperatorData()"></div>
                <div class="form-group"><label>Tu Nombre</label><input type="text" id="op_name" placeholder="Alfred" oninput="saveOperatorData()"></div>
                <div class="form-group"><label>Tu Grilla</label><input type="text" id="op_grid" placeholder="FL01aa" oninput="saveOperatorData()"></div>
            </div>
            <div class="form-row">
                <div class="form-group" style="grid-column: span 2;">
                    <label>Tu Correo Electr√≥nico (Opcional)</label>
                    <input type="email" id="op_email" placeholder="tu_correo@ejemplo.com" oninput="saveOperatorData()">
                </div>
            </div>
        </div>

        <!-- PANEL NUEVO/EDITAR QSO -->
        <div id="panel-log" class="log-entry-panel active-panel">
            <h3 id="panel-title" style="color: var(--neon-pink); margin-bottom: 15px;">Registro de Contacto</h3>
            <input type="hidden" id="edit_id">
            <div class="form-row">
                <div class="form-group" style="grid-column: span 2;">
                    <label>Callsign Corresponsal</label>
                    <div class="qrz-input-wrapper">
                        <input type="text" id="call" placeholder="Indicativo" onkeyup="this.value = this.value.toUpperCase()">
                        <button type="button" class="btn-qrz" title="Ver en QRZ.com" onclick="checkQRZ()">‚ö°</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Frecuencia (MHz)</label>
                    <input type="text" id="freq" placeholder="7.150">
                </div>
                <div class="form-group">
                    <label>Banda</label>
                    <select id="band">
                        <option value="40M">40M</option><option value="20M">20M</option>
                        <option value="15M">15M</option><option value="10M">10M</option>
                        <option value="6M">6M</option><option value="2M">2M</option>
                        <option value="70CM">70CM</option><option value="23CM">23CM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Modo</label>
                    <input list="modes" id="mode" placeholder="Modo...">
                    <datalist id="modes">
                        <option value="SSB"><option value="FM"><option value="CW"><option value="FT8">
                        <option value="FT4"><option value="Digital Voice"><option value="DMR">
                        <option value="RTTY"><option value="JS8">
                    </datalist>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Fecha UTC (AAAA/MM/DD)</label>
                    <input type="text" id="manual_date" placeholder="Auto si vac√≠o">
                </div>
                <div class="form-group">
                    <label>Hora UTC (HH:MM:SS)</label>
                    <input type="text" id="manual_time" placeholder="Auto si vac√≠o">
                </div>
                <div class="form-group"><label>RST Sent</label><input type="text" id="rst_s" value="59"></div>
                <div class="form-group"><label>RST Rcvd</label><input type="text" id="rst_r" value="59"></div>
            </div>

            <div class="form-row">
                <div class="form-group" style="grid-column: span 2;">
                    <label>Correo del Corresponsal (Opcional)</label>
                    <input type="email" id="email" placeholder="correo_contacto@ejemplo.com">
                </div>
                <div class="form-group" style="grid-column: span 2;">
                    <label>Comentarios / Nombre</label>
                    <input type="text" id="comment" placeholder="Ej: Juan de Camag√ºey...">
                </div>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button id="save-btn" class="btn btn-pink" onclick="saveQSO()" style="flex: 2;">üíæ Guardar Registro</button>
                <button id="cancel-edit" class="btn btn-cyan" onclick="resetForm()" style="flex: 1; display: none;">Cancelar</button>
            </div>
        </div>

        <!-- PANEL TABLA LIBRO -->
        <div id="panel-table" class="log-entry-panel">
            <h3 style="color: var(--neon-cyan); margin-bottom: 10px;">Libro de Guardia</h3>
            <input type="text" id="search" class="search-box" placeholder="üîé Filtrar por indicativo..." oninput="renderTable()" style="width:100%; padding:10px; background:#000; border:1px solid var(--neon-cyan); color:var(--neon-green); margin-bottom:15px; border-radius:5px;">
            <div class="table-container">
                <table>
                    <thead>
                        <tr><th>Fecha/Hora UTC</th><th>Callsign</th><th>Freq</th><th>Banda</th><th>Modo</th><th>RST</th><th>Acci√≥n</th></tr>
                    </thead>
                    <tbody id="table-body"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    const STORAGE_KEY = 'cl7adv_logs_v5_3_5';
    const OP_KEY = 'cl7adv_operator_v5_3_5';

    let qsoList = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    let opData = JSON.parse(localStorage.getItem(OP_KEY)) || { call: "", name: "", grid: "", email: "" };

    window.addEventListener('load', () => {
        setTimeout(() => {
            const intro = document.getElementById('intro-screen');
            const main = document.getElementById('main-content');
            intro.style.opacity = '0';
            setTimeout(() => {
                intro.style.visibility = 'hidden';
                main.style.opacity = '1';
                document.body.style.overflow = 'auto';
            }, 1000);
        }, 1000); 
    });

    function getUTCInfo() {
        const now = new Date();
        const y = now.getUTCFullYear();
        const m = (now.getUTCMonth() + 1).toString().padStart(2, '0');
        const d = now.getUTCDate().toString().padStart(2, '0');
        const hh = now.getUTCHours().toString().padStart(2, '0');
        const mm = now.getUTCMinutes().toString().padStart(2, '0');
        const ss = now.getUTCSeconds().toString().padStart(2, '0');
        
        return {
            dateRaw: `${y}${m}${d}`,
            timeRaw: `${hh}${mm}${ss}`,
            dateFormatted: `${y}/${m}/${d}`,
            timeFormatted: `${hh}:${mm}:${ss}`,
            display: `${hh}:${mm}:${ss}`
        };
    }

    function updateClock() {
        document.getElementById('clock').textContent = getUTCInfo().display + " UTC";
    }
    setInterval(updateClock, 1000);

    function togglePanel(panelId, buttonId) {
        document.querySelectorAll('.log-entry-panel').forEach(p => p.classList.remove('active-panel'));
        document.querySelectorAll('.menu-item').forEach(b => b.classList.remove('active-item'));
        
        const targetPanel = document.getElementById(panelId);
        if (targetPanel) targetPanel.classList.add('active-panel');
        
        const targetBtn = document.getElementById(buttonId);
        if (targetBtn) targetBtn.classList.add('active-item');

        if(panelId === 'panel-table') renderTable();
    }

    function saveOperatorData() {
        opData.call = document.getElementById('op_call').value.toUpperCase();
        opData.name = document.getElementById('op_name').value;
        opData.grid = document.getElementById('op_grid').value.toUpperCase();
        opData.email = document.getElementById('op_email').value;
        localStorage.setItem(OP_KEY, JSON.stringify(opData));
        document.getElementById('header-op').textContent = opData.call || "---";
    }

    // FUNCION PARA VERIFICAR EN QRZ.COM
    function checkQRZ() {
        const call = document.getElementById('call').value.trim().toUpperCase();
        if (!call) {
            alert("Por favor, introduce un indicativo primero.");
            return;
        }
        window.open(`https://www.qrz.com/db/${call}`, '_blank');
    }

    function saveQSO() {
        const call = document.getElementById('call').value.trim().toUpperCase();
        if(!call) return alert("Por favor, ingrese el indicativo (Callsign).");

        const utc = getUTCInfo();
        const editId = document.getElementById('edit_id').value;
        
        let rawInputDate = document.getElementById('manual_date').value.trim();
        let rawInputTime = document.getElementById('manual_time').value.trim();

        let finalDate = rawInputDate === "" ? utc.dateRaw : rawInputDate.replace(/\D/g, '').substring(0, 8);
        let finalTime = rawInputTime === "" ? utc.timeRaw : rawInputTime.replace(/\D/g, '').substring(0, 6);

        const qso = {
            id: editId ? parseInt(editId) : Date.now(),
            call: call,
            freq: document.getElementById('freq').value.trim(),
            band: document.getElementById('band').value,
            mode: document.getElementById('mode').value.toUpperCase() || "SSB",
            rst_s: document.getElementById('rst_s').value.trim() || "59",
            rst_r: document.getElementById('rst_r').value.trim() || "59",
            date: finalDate,
            time: finalTime,
            email: document.getElementById('email').value.trim(),
            comment: document.getElementById('comment').value.trim()
        };

        if (editId) {
            const index = qsoList.findIndex(q => q.id === qso.id);
            if (index !== -1) qsoList[index] = qso;
        } else {
            qsoList.unshift(qso);
        }

        localStorage.setItem(STORAGE_KEY, JSON.stringify(qsoList));
        resetForm();
        updateCount();
        if(editId) togglePanel('panel-table', 'btn-table');
        else alert("¬°Registro guardado correctamente!");
    }

    function resetForm() {
        document.getElementById('edit_id').value = "";
        document.getElementById('call').value = "";
        document.getElementById('comment').value = "";
        document.getElementById('email').value = "";
        document.getElementById('manual_date').value = "";
        document.getElementById('manual_time').value = "";
        document.getElementById('freq').value = "";
        document.getElementById('rst_s').value = "59";
        document.getElementById('rst_r').value = "59";
        
        document.getElementById('panel-title').textContent = "Registro de Contacto";
        document.getElementById('panel-title').style.color = "var(--neon-pink)";
        document.getElementById('save-btn').textContent = "üíæ Guardar Registro";
        document.getElementById('cancel-edit').style.display = "none";
    }

    function editQSO(id) {
        const q = qsoList.find(item => item.id === id);
        if (!q) return;

        const vDate = q.date.replace(/(\d{4})(\d{2})(\d{2})/, "$1/$2/$3");
        const vTime = q.time.replace(/(\d{2})(\d{2})(\d{2})/, "$1:$2:$3");

        document.getElementById('edit_id').value = q.id;
        document.getElementById('call').value = q.call;
        document.getElementById('freq').value = q.freq;
        document.getElementById('band').value = q.band;
        document.getElementById('mode').value = q.mode;
        document.getElementById('rst_s').value = q.rst_s;
        document.getElementById('rst_r').value = q.rst_r;
        document.getElementById('manual_date').value = vDate;
        document.getElementById('manual_time').value = vTime;
        document.getElementById('email').value = q.email || "";
        document.getElementById('comment').value = q.comment;

        document.getElementById('panel-title').textContent = "Editando Registro";
        document.getElementById('panel-title').style.color = "var(--neon-cyan)";
        document.getElementById('save-btn').textContent = "‚úÖ Actualizar Registro";
        document.getElementById('cancel-edit').style.display = "block";

        togglePanel('panel-log', 'btn-log');
    }

    function renderTable() {
        const filterStr = document.getElementById('search').value.toUpperCase();
        const tbody = document.getElementById('table-body');
        tbody.innerHTML = "";
        
        const filtered = qsoList.filter(q => q.call.includes(filterStr));

        filtered.forEach(q => {
            const displayDate = q.date.replace(/(\d{4})(\d{2})(\d{2})/, "$1/$2/$3");
            const displayTime = q.time.replace(/(\d{2})(\d{2})(\d{2})/, "$1:$2:$3");

            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td style="font-family:monospace">${displayDate} | ${displayTime}</td>
                <td style="color:var(--neon-yellow); font-weight:bold">${q.call}</td>
                <td style="color:var(--neon-green)">${q.freq || '---'}</td>
                <td>${q.band}</td>
                <td>${q.mode}</td>
                <td>${q.rst_s}/${q.rst_r}</td>
                <td>
                    <button title="Editar" class="action-btn" onclick="editQSO(${q.id})">‚úèÔ∏è</button>
                    <button title="QRZ" class="action-btn" onclick="window.open('https://www.qrz.com/db/${q.call}', '_blank')">üåê</button>
                    <button title="Borrar" class="action-btn delete-trigger" style="color:red">‚ùå</button>
                </td>
            `;
            
            tr.querySelector('.delete-trigger').addEventListener('click', () => {
                deleteQSO(q.id);
            });

            tbody.appendChild(tr);
        });
    }

    function deleteQSO(id) {
        if(confirm("¬øEst√°s seguro de que deseas eliminar este registro?")) {
            qsoList = qsoList.filter(q => q.id !== id);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(qsoList));
            renderTable(); 
            updateCount(); 
        }
    }

    function clearLogs() { 
        if(confirm("¬°ATENCI√ìN! Se borrar√°n TODOS los registros del libro de guardia permanentemente. ¬øContinuar?")) { 
            qsoList = []; 
            localStorage.setItem(STORAGE_KEY, JSON.stringify([])); 
            updateCount(); 
            renderTable();
            alert("Libro de guardia vaciado con √©xito.");
        } 
    }

    function updateCount() { 
        const count = qsoList.length;
        document.getElementById('header-count').textContent = count; 
    }

    function exportADIF() {
        if(qsoList.length === 0) return alert("No hay registros para exportar.");
        
        let adi = `ADIF Export - NEON LOG STATION v5.3.5\n`;
        adi += `<PROGRAMID:12>NEONLOGSTN53\n<ADIF_VER:5>3.1.4\n<EOH>\n\n`;

        qsoList.forEach(q => {
            adi += `<CALL:${q.call.length}>${q.call}`;
            adi += `<QSO_DATE:${q.date.length}>${q.date}`;
            adi += `<TIME_ON:${q.time.length}>${q.time}`;
            adi += `<BAND:${q.band.length}>${q.band}`;
            adi += `<MODE:${q.mode.length}>${q.mode}`;
            adi += `<RST_SENT:${q.rst_s.length}>${q.rst_s}`;
            adi += `<RST_RCVD:${q.rst_r.length}>${q.rst_r}`;
            
            if(q.email) adi += `<EMAIL:${q.email.length}>${q.email}`;
            if(q.freq) adi += `<FREQ:${q.freq.length}>${q.freq}`;
            if(q.comment) adi += `<COMMENT:${q.comment.length}>${q.comment}`;
            
            if(opData.call) adi += `<STATION_CALLSIGN:${opData.call.length}>${opData.call}`;
            if(opData.name) adi += `<OPERATOR:${opData.name.length}>${opData.name}`;
            if(opData.email) adi += `<MY_EMAIL:${opData.email.length}>${opData.email}`;
            
            adi += `<EOR>\n`;
        });

        const blob = new Blob([adi], {type: 'text/plain'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `Log_Alfred_${opData.call || 'Station'}_${getUTCInfo().dateRaw}.adi`;
        a.click();
    }

    window.onload = function() {
        document.getElementById('op_call').value = opData.call || "";
        document.getElementById('op_name').value = opData.name || "";
        document.getElementById('op_grid').value = opData.grid || "";
        document.getElementById('op_email').value = opData.email || "";
        document.getElementById('header-op').textContent = opData.call || "---";
        
        updateCount();
        updateClock();
        renderTable();
    }
</script>
</body>
</html>
